# AWS IAM Roles for Service Accounts (IRSA) annotations
# These ServiceAccounts are configured for AWS IRSA federation
# Prerequisites:
# 1. IAM Roles must be created with appropriate trust policies for OIDC provider
# 2. Attach policies granting access to DynamoDB, S3, and other AWS services
# 3. Update <role-arn> placeholders with actual IAM Role ARNs

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: order-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: order-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: aws
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::<account-id>:role/reddog-order-service-role"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: make-line-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: make-line-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: aws
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::<account-id>:role/reddog-make-line-service-role"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: loyalty-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: loyalty-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: aws
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::<account-id>:role/reddog-loyalty-service-role"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: accounting-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: accounting-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: aws
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::<account-id>:role/reddog-accounting-service-role"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: receipt-generation-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: receipt-generation-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: aws
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::<account-id>:role/reddog-receipt-service-role"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: virtual-worker
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: virtual-worker
    app.kubernetes.io/component: simulator
    app.kubernetes.io/environment: aws
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::<account-id>:role/reddog-virtual-worker-role"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: virtual-customers
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: virtual-customers
    app.kubernetes.io/component: simulator
    app.kubernetes.io/environment: aws
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::<account-id>:role/reddog-virtual-customers-role"
