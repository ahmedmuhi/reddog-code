# GCP Workload Identity ServiceAccount annotations
# These ServiceAccounts are configured for GCP Workload Identity federation
# Prerequisites:
# 1. GCP ServiceAccounts must be created for each service
# 2. Grant IAM bindings to link K8s ServiceAccount with GCP ServiceAccount
# 3. Grant appropriate permissions (e.g., Firestore, GCS access) to GCP ServiceAccounts
# 4. Update <gcp-service-account> and <project-id> placeholders

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: order-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: order-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: gcp
  annotations:
    iam.gke.io/gcp-service-account: "reddog-order-service@<project-id>.iam.gserviceaccount.com"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: make-line-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: make-line-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: gcp
  annotations:
    iam.gke.io/gcp-service-account: "reddog-make-line-service@<project-id>.iam.gserviceaccount.com"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: loyalty-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: loyalty-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: gcp
  annotations:
    iam.gke.io/gcp-service-account: "reddog-loyalty-service@<project-id>.iam.gserviceaccount.com"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: accounting-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: accounting-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: gcp
  annotations:
    iam.gke.io/gcp-service-account: "reddog-accounting-service@<project-id>.iam.gserviceaccount.com"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: receipt-generation-service
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: receipt-generation-service
    app.kubernetes.io/component: backend
    app.kubernetes.io/environment: gcp
  annotations:
    iam.gke.io/gcp-service-account: "reddog-receipt-service@<project-id>.iam.gserviceaccount.com"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: virtual-worker
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: virtual-worker
    app.kubernetes.io/component: simulator
    app.kubernetes.io/environment: gcp
  annotations:
    iam.gke.io/gcp-service-account: "reddog-virtual-worker@<project-id>.iam.gserviceaccount.com"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: virtual-customers
  namespace: reddog-retail
  labels:
    app.kubernetes.io/name: virtual-customers
    app.kubernetes.io/component: simulator
    app.kubernetes.io/environment: gcp
  annotations:
    iam.gke.io/gcp-service-account: "reddog-virtual-customers@<project-id>.iam.gserviceaccount.com"
